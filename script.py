# import os
# os.chdir(r'd:\code\py\sudoku')
import importlib
# from sudoku_arr import SudokuBoard, solver_simple
from sudoku_dict import DictSolver
#from efpkg.tools import TicToc
import sys
sys.path.append("/home/ef/code/py")
from efpkg.tools.tictoc import TicToc
import math


sample1 = [
      [5,0,0,8,0,0,1,2,0],
      [0,0,0,0,1,0,0,3,0],
      [1,4,0,0,5,6,9,7,8],
      [0,0,0,0,0,3,0,0,2],
      [0,7,5,0,2,0,6,1,0],
      [9,0,0,5,0,0,0,0,0],
      [4,5,1,6,3,0,0,8,7],
      [0,9,0,0,8,0,0,0,0],
      [0,6,8,0,0,2,0,0,5]]

sample2 = [
      [0,0,0,0,0,6,0,0,0],
      [8,0,0,9,0,0,6,7,0],
      [0,0,0,0,0,4,0,5,9],
      [0,2,9,0,0,0,4,3,0],
      [0,6,0,0,0,0,0,2,0],
      [0,1,8,0,0,0,5,9,0],
      [3,5,0,2,0,0,0,0,0],
      [0,8,6,0,0,5,0,0,4],
      [0,0,0,8,0,0,0,0,0]]

sample16 = [
      [0,0,2,1,0,0,11,0,0,0,0,0,0,0,0,0],
      [0,6,10,0,0,0,13,0,4,0,0,0,0,9,0,0],
      [0,16,0,11,0,10,2,0,0,15,0,12,6,0,7,0],
      [9,0,0,15,0,0,12,0,2,16,0,0,0,4,3,0],
      [0,0,15,0,0,3,6,8,0,0,0,0,4,0,0,16],
      [0,0,4,0,0,7,0,15,13,0,0,0,5,0,11,0],
      [0,0,0,10,0,1,5,0,0,0,9,8,0,2,0,0],
      [0,0,0,0,0,11,0,0,0,7,15,0,0,12,8,0],
      [0,11,1,0,0,5,3,0,0,0,0,10,14,0,0,0],
      [0,15,13,0,0,0,8,11,0,3,0,0,9,0,0,0],
      [7,0,16,0,0,0,4,0,8,2,14,0,0,0,0,0],
      [0,3,0,0,0,0,16,10,15,0,0,13,12,0,6,0],
      [5,0,0,0,14,0,0,0,12,1,0,11,0,0,13,0],
      [13,4,8,0,11,16,0,12,5,0,0,0,1,0,0,0],
      [0,0,0,0,0,4,0,0,3,9,8,0,11,6,12,10],
      [0,0,0,6,0,8,0,9,14,0,4,0,0,15,0,0]]

sample3 = [
      [5,11,0,4,9,0,0,0,0,0,16,0,0,13,0,0],
      [3,0,0,7,8,12,0,0,0,0,0,14,0,0,0,5],
      [0,0,0,0,0,0,6,3,1,0,2,0,10,11,0,0],
      [0,13,0,0,7,4,0,0,8,5,0,9,0,0,0,0],
      [0,8,14,16,0,0,0,0,11,0,0,0,15,1,0,0],
      [0,0,2,6,10,0,0,1,0,3,4,8,0,0,11,0],
      [0,4,0,0,2,0,0,0,14,12,0,13,0,8,0,6],
      [9,0,11,0,0,5,0,0,0,0,0,0,0,0,0,10],
      [0,0,16,0,0,0,4,0,0,0,0,0,1,3,12,7],
      [1,0,0,0,0,11,9,0,0,0,7,0,0,0,16,2],
      [7,0,0,0,3,0,0,0,0,0,0,2,5,14,0,8],
      [13,0,3,0,0,0,0,0,0,9,0,16,0,0,15,0],
      [0,0,5,0,14,0,0,16,0,0,0,4,0,0,0,0],
      [0,14,13,0,0,2,0,0,0,0,11,0,0,6,4,0],
      [0,0,15,0,4,0,0,0,13,0,0,0,0,0,7,0],
      [0,0,0,3,0,0,0,0,0,1,0,6,0,5,14,12]]

sample416 = [
      [10,5,0,0,0,0,0,0,3,8,6,0,0,15,0,0],
      [0,0,0,0,12,0,0,0,0,0,0,0,0,3,1,0],
      [0,2,0,0,3,11,8,0,0,0,0,0,0,6,7,4],
      [8,3,0,0,0,0,0,0,0,0,0,5,13,0,14,0],
      [0,7,0,0,5,8,2,13,0,9,0,0,0,4,0,1],
      [2,1,0,9,0,0,4,12,11,7,13,0,0,0,3,0],
      [16,4,0,14,0,3,0,7,0,12,0,0,0,13,10,2],
      [6,13,0,0,0,0,10,1,4,3,0,2,0,0,0,0],
      [1,0,0,0,10,4,14,11,12,16,2,8,3,7,0,0],
      [15,10,2,8,0,12,0,3,6,5,14,7,4,1,0,0],
      [0,0,7,4,0,0,0,2,0,0,3,0,0,0,12,0],
      [11,0,12,3,8,0,0,0,9,1,4,13,2,10,0,14],
      [5,0,0,0,0,0,3,4,13,6,11,12,1,0,9,0],
      [13,0,6,0,16,0,12,9,1,2,7,3,15,5,4,0],
      [0,0,0,0,0,5,13,8,16,10,15,9,0,0,0,0],
      [7,12,9,0,0,0,0,15,0,14,0,4,10,16,13,3]]

worlds_hardest = '800000000003600000070090200050007000000045700000100030001000068008500010090000400'

sample516 = '51030940E00A000B00G408000000060000000003400005F0E00700000005G0C0B0A000382EC000000000D172G00F00000G0F6000DB0009002E00A000086000008091F0DC00402000004C00050000003G0000200B05000E0402000380070000B008000000C910B00D0D100E57008000000F760B240000A09003009010000G0000'

sample616 = 'XXXXXXXXXXXXXXE1XF3XXXGXEXXB8XXXX8X4XXXXG71XXF5XXXX9XBX1X54D7XXXXXX2XAXX7XX5XDX8FX6XX5XXXXXAXX4X4XAXCXXXXXXXX6XXX7XXXFDECXXXXXXXX1FXX4ADXX2CXX9XCXDXXXEXXGAXX2X3XXXXX7X3XXXXX8DXX6X89X2FXXD3XXXGXX9A6XCXBXXG4XXXXXXXX3B7XAXXXX2XXXXEXXX5XX7XXCXXXXBXEDX85XXFX3A7'

utf3b = [
   [7,10,2,12,5,3,0,0,0,0,8,0,13,15,0,4],
   [6,4,1,5,13,15,0,0,9,0,0,10,7,16,14,3],
   [11,16,8,13,0,1,0,0,0,0,7,15,5,10,0,12],
   [3,9,14,15,7,10,0,0,0,6,0,5,8,2,11,1],
   [4,13,3,6,0,8,10,0,15,2,11,16,9,12,5,7],
   [1,5,9,10,4,12,2,7,13,3,14,8,6,11,16,15],
   [12,14,7,2,16,13,11,15,5,9,1,6,3,4,8,10],
   [16,15,11,8,9,5,6,3,7,12,10,4,1,14,2,13],
   [9,3,16,7,2,4,13,8,11,1,15,14,12,5,10,6],
   [2,8,5,14,0,6,0,0,10,0,0,12,16,7,3,11],
   [13,6,15,11,10,7,3,12,8,5,16,2,14,1,4,9],
   [10,1,12,4,11,14,5,16,0,7,0,9,2,13,15,8],
   [8,11,10,3,0,0,0,0,0,0,0,7,4,9,13,5],
   [5,7,0,16,3,13,0,0,14,0,9,0,10,8,12,2],
   [14,2,13,9,12,11,7,10,4,8,5,3,15,6,1,16],
   [15,12,0,1,0,0,0,5,0,10,0,13,11,3,7,14]]

utf4 = [14,0,15,0,0,4,7,0,1,0,0,0,0,5,0,0,0,0,0,0,0,0,16,0,0,0,0,0,11,0,14,9,2,4,1,0,12,11,15,0,0,3,0,0,13,0,8,0,0,8,0,10,0,0,0,5,0,0,9,0,0,6,1,0,\
0,3,2,7,0,0,5,16,6,12,14,0,0,9,0,8,0,0,0,0,0,13,0,0,5,0,3,0,12,0,0,6,0,14,5,8,0,0,0,0,0,0,0,0,0,10,0,15,0,0,6,0,0,8,14,0,0,11,0,0,1,0,0,0,\
0,15,0,0,0,16,0,0,3,5,0,0,0,0,12,13,0,0,0,0,0,0,3,8,12,0,7,0,0,2,0,11,3,0,14,0,4,15,0,12,2,13,16,0,6,0,0,0,0,1,0,0,0,7,0,2,0,10,15,11,0,0,0,0,\
1,0,4,3,0,0,0,0,0,0,0,0,0,13,10,0,16,0,12,0,0,0,11,1,0,7,0,0,0,0,4,0,7,9,0,11,0,3,0,14,0,16,0,2,0,0,0,0,0,0,0,0,0,2,0,15,13,0,0,12,0,0,0,0]

sample2x3 = [
      [0,0,3,0,5,0],
      [2,4,5,0,3,0],
      [0,0,0,0,6,2],
      [1,2,0,0,0,0],
      [0,5,0,3,1,6],
      [0,6,0,4,0,0]
]
sample2x3_s = '003050245030000062120000050316060400'

sample_noval = [
      [0, 0, 0, 9, 3, 0, 0, 0, 0],
      [4, 0, 0, 0, 7, 5, 0, 9, 0],
      [0, 0, 0, 0, 2, 0, 0, 0, 0],
      [0, 0, 0, 2, 0, 0, 0, 0, 3],
      [8, 3, 0, 0, 0, 0, 0, 0, 0],
      [7, 9, 0, 0, 0, 0, 0, 8, 0],
      [0, 0, 4, 0, 0, 0, 3, 0, 5],
      [0, 0, 0, 0, 6, 9, 0, 0, 0],
      [0, 0, 5, 0, 0, 4, 2, 0, 0]]

gen1 = [[2, 8, 0, 0, 3, 0, 0, 0, 10, 0, 0, 0, 0, 0, 0, 0],
 [12, 0, 0, 15, 0, 0, 0, 0, 1, 0, 3, 9, 0, 8, 0, 0],
 [0, 11, 5, 14, 0, 15, 0, 1, 0, 0, 0, 0, 0, 0, 7, 0],
 [0, 0, 0, 10, 13, 4, 0, 0, 0, 5, 0, 12, 3, 0, 11, 0],
 [0, 0, 0, 0, 14, 16, 2, 9, 12, 0, 0, 0, 0, 0, 0, 4],
 [14, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 16, 11, 5, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 15, 3, 16, 0],
 [0, 0, 7, 12, 6, 0, 0, 0, 0, 8, 0, 4, 0, 0, 0, 0],
 [0, 16, 0, 0, 15, 0, 9, 6, 0, 0, 0, 0, 14, 0, 0, 0],
 [0, 0, 0, 0, 2, 0, 0, 0, 0, 14, 0, 6, 0, 0, 0, 9],
 [9, 13, 1, 0, 0, 0, 0, 4, 0, 0, 0, 2, 16, 0, 0, 0],
 [0, 0, 0, 4, 0, 0, 12, 0, 0, 13, 0, 10, 0, 1, 15, 0],
 [0, 0, 12, 8, 0, 1, 0, 0, 0, 9, 0, 0, 0, 0, 0, 5],
 [15, 3, 0, 9, 0, 8, 7, 0, 0, 0, 0, 0, 0, 11, 4, 0],
 [5, 0, 0, 0, 0, 0, 4, 11, 0, 0, 2, 3, 0, 0, 0, 10],
 [0, 0, 6, 0, 0, 0, 13, 5, 0, 0, 0, 0, 0, 0, 2, 8]]

m5 = [
      [12, 16, 4, 5, 0, 0, 0, 1, 0, 0, 3, 14, 0, 8, 15, 6], 
      [15, 1, 9, 13, 0, 12, 0, 0, 0, 0, 5, 8, 0, 2, 4, 14], 
      [2, 10, 8, 7, 14, 6, 5, 15, 16, 13, 9, 4, 12, 3, 1, 11], 
      [3, 11, 6, 14, 4, 8, 10, 2, 1, 7, 15, 12, 16, 13, 5, 9], 
      [9, 8, 2, 6, 0, 0, 16, 11, 0, 0, 10, 0, 0, 12, 14, 0], 
      [10, 14, 5, 0, 0, 0, 6, 0, 0, 11, 4, 2, 8, 15, 16, 0], 
      [0, 3, 16, 0, 0, 14, 15, 7, 0, 9, 8, 13, 2, 11, 6, 0], 
      [13, 7, 11, 15, 8, 0, 2, 12, 14, 6, 16, 1, 9, 5, 3, 0], 
      [0, 9, 12, 0, 6, 15, 4, 10, 0, 0, 13, 11, 14, 7, 8, 2], 
      [14, 0, 10, 3, 2, 7, 13, 5, 8, 12, 0, 9, 1, 4, 11, 16], 
      [11, 5, 7, 0, 12, 0, 1, 8, 0, 0, 14, 10, 0, 6, 9, 0], 
      [0, 0, 13, 8, 0, 11, 9, 14, 0, 0, 1, 7, 0, 10, 12, 0], 
      [0, 12, 3, 0, 0, 0, 14, 0, 13, 8, 0, 0, 0, 9, 7, 0], 
      [0, 13, 1, 0, 11, 0, 8, 16, 9, 0, 12, 3, 6, 14, 2, 0], 
      [8, 0, 14, 9, 0, 0, 3, 0, 10, 1, 0, 0, 0, 16, 13, 12], 
      [0, 0, 15, 11, 0, 0, 12, 13, 4, 14, 0, 16, 3, 1, 10, 8]]

m6 = [
      [0,7,2,6,0,0,8,0,0,10,0,0,0,0,14,5],
      [12,0,5,15,0,6,10,0,0,0,14,9,4,0,0,0],
      [10,0,0,0,0,16,0,0,11,0,0,15,1,0,0,2],
      [0,16,0,0,0,14,1,9,0,3,0,0,0,8,0,0],
      [0,0,14,12,0,0,0,0,4,0,3,0,0,0,0,15],
      [13,8,0,2,0,0,0,0,0,0,0,11,0,0,16,0],
      [0,0,0,0,0,12,0,0,0,2,1,8,5,0,10,11],
      [0,15,0,0,0,0,0,0,7,0,16,14,0,4,0,0],
      [0,0,6,0,0,13,0,5,0,0,0,3,2,0,0,1],
      [14,0,11,8,1,4,0,2,0,0,0,0,15,12,0,0],
      [15,0,0,0,0,0,14,0,0,0,13,0,0,11,0,6],
      [0,4,9,16,0,0,0,11,0,0,5,0,0,0,8,14],
      [0,2,0,7,11,0,0,6,0,12,15,0,0,0,0,0],
      [5,9,0,14,8,0,0,0,0,0,0,0,0,1,15,0],
      [0,0,0,0,13,2,0,0,0,6,0,0,8,16,0,0],
      [0,0,13,0,0,1,0,0,9,0,0,0,0,0,0,0]
]

m7 = [
0,0,0,0,0,5,0,0,13,7,0,0,0,11,0,0,
0,0,0,0,0,0,7,12,15,0,16,1,8,0,2,13,
0,13,0,0,0,0,9,10,0,8,0,0,4,5,12,0,
6,0,12,0,4,0,0,15,0,5,0,0,0,0,1,0,
14,0,0,0,0,6,8,0,16,0,15,0,0,0,5,0,
0,0,4,0,11,0,13,0,0,0,0,0,0,0,0,0,
12,8,0,0,0,14,0,0,2,11,0,0,0,4,0,15,
16,0,0,11,0,0,5,0,6,9,13,0,1,0,0,0,
0,0,3,0,0,0,0,2,0,0,0,15,5,0,13,11,
0,0,2,0,0,0,0,6,0,14,5,0,0,1,0,0,
5,16,0,7,0,0,0,0,0,0,0,0,0,0,0,0,
10,0,0,0,0,0,0,7,3,2,4,0,0,8,9,14,
0,0,5,0,0,10,11,3,0,0,14,12,2,15,0,0,
0,0,0,0,0,0,0,0,0,13,6,9,0,12,0,1,
1,0,0,15,0,0,4,0,0,0,0,0,0,0,7,16,
8,0,0,0,9,7,0,0,0,0,3,11,13,0,0,0,
]

m8 = [
      0,15,0,0,0,0,4,9,0,0,0,5,13,7,0,14,
      0,8,3,0,1,16,0,2,0,0,0,0,11,0,9,0,
      0,0,0,0,15,0,0,13,0,1,11,0,0,0,0,0,
      0,0,1,4,3,14,12,0,0,0,9,0,8,2,0,0,
      1,0,0,11,0,0,9,0,0,0,0,0,0,0,0,0,
      0,6,0,9,0,11,15,0,0,0,0,0,10,3,12,0,
      0,0,15,0,0,6,7,14,0,0,0,0,0,0,13,5,
      0,7,13,0,0,0,0,0,0,4,16,0,0,14,0,0,
      0,0,0,14,0,15,0,1,0,0,0,0,0,8,3,9,
      0,0,0,1,0,5,0,0,0,11,0,0,4,12,6,0,
      0,0,0,0,0,4,13,11,7,3,5,0,0,0,0,0,
      0,0,0,2,16,0,0,0,6,0,12,10,0,0,0,0,
      13,9,0,0,4,0,0,0,0,5,14,11,16,15,8,0,
      0,0,0,3,0,10,16,0,8,0,2,0,0,13,14,0,
      6,0,0,0,0,0,0,12,13,0,7,0,9,1,0,0,
      16,0,0,0,14,0,0,0,12,0,0,6,0,5,0,4
]

m8b = [
      0,15,0,0,11,8,4,9,0,0,0,5,13,7,1,14,
      0,8,3,13,1,16,0,2,0,0,0,0,11,0,9,0,
      0,0,0,0,15,7,0,13,0,1,11,8,0,0,0,0,
      0,0,1,4,3,14,12,10,0,0,9,0,8,2,0,0,
      1,0,0,11,0,0,9,0,0,0,0,0,0,0,0,0,
      0,6,0,9,0,11,15,0,0,0,0,0,10,3,12,0,
      0,0,15,0,0,6,7,14,11,0,0,0,0,9,13,5,
      0,7,13,0,0,0,0,5,0,4,16,0,0,14,0,0,
      0,0,0,14,0,15,10,1,0,0,0,0,0,8,3,9,
      0,0,0,1,7,5,2,0,0,11,0,0,4,12,6,0,
      0,0,0,0,0,4,13,11,7,3,5,1,14,0,0,0,
      0,0,0,2,16,9,14,0,6,0,12,10,0,11,0,0,
      13,9,0,0,4,0,0,0,0,5,14,11,16,15,8,0,
      0,1,0,3,9,10,16,0,8,15,2,4,0,13,14,0,
      6,0,0,15,5,0,8,12,13,0,7,0,9,1,0,0,
      16,0,0,0,14,13,11,15,12,9,0,6,0,5,0,4
]

del DictSolver
from sudoku_dict import DictSolver
s = DictSolver(m8b, algorithm='full')
s.available_ops()
t = TicToc()
t.tic()
s.solve()
t.toc()
s.recipe

